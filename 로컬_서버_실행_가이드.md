# 로컬 서버 실행 가이드

## 1단계: MongoDB 실행

### 방법 1: Docker 사용 (가장 간단 ⭐)

```bash
# MongoDB 컨테이너 실행
docker run -d -p 27017:27017 --name mongodb mongo:latest

# 실행 확인
docker ps

# 로그 확인
docker logs mongodb
```

**중지:**
```bash
docker stop mongodb
docker rm mongodb
```

---

### 방법 2: MongoDB Community Server 설치

1. **MongoDB 다운로드**
   - https://www.mongodb.com/try/download/community
   - Windows용 MSI 설치 파일 다운로드

2. **설치**
   - 설치 시 "Install MongoDB as a Service" 선택
   - 포트: 27017 (기본값)

3. **서비스 확인**
   - Windows 서비스에서 "MongoDB" 확인
   - 자동으로 실행됨

4. **수동 실행 (필요 시)**
   ```bash
   # MongoDB 설치 경로로 이동
   cd "C:\Program Files\MongoDB\Server\7.0\bin"
   
   # MongoDB 실행
   mongod.exe
   ```

---

### 방법 3: MongoDB Compass만 사용

- MongoDB Compass 실행
- "Connect" 클릭
- 연결 문자열: `mongodb://localhost:27017`
- 연결 성공 시 MongoDB 서버 실행됨

---

## 2단계: MongoDB 연결 확인

**MongoDB Compass에서:**
- 연결 문자열: `mongodb://localhost:27017`
- Connect 클릭
- 연결 성공 확인

**또는 터미널에서:**
```bash
# Docker 사용 시
docker exec -it mongodb mongosh

# MongoDB 설치 시
mongosh
```

---

## 3단계: Spring Boot 애플리케이션 실행

### 방법 1: IDE에서 실행 (가장 간단)

1. **IntelliJ IDEA / Cursor**
   - `EasythonApplication.java` 파일 열기
   - `main` 메서드 옆 실행 버튼 클릭
   - 또는 `Shift + F10` (Windows)

2. **실행 확인**
   - 콘솔에 "Started EasythonApplication" 메시지 확인
   - 포트: http://localhost:8080

---

### 방법 2: Gradle로 실행

```bash
# Windows PowerShell
.\gradlew bootRun

# 또는
.\gradlew.bat bootRun
```

**실행 확인:**
- 콘솔에 "Started EasythonApplication" 메시지 확인
- 브라우저에서 http://localhost:8080 접속

---

### 방법 3: JAR 파일로 실행

```bash
# 1. 빌드
.\gradlew clean build

# 2. JAR 파일 실행
java -jar build\libs\easython-0.0.1-SNAPSHOT.jar
```

---

## 4단계: 초기 데이터 확인

애플리케이션이 실행되면 `DataInitializer`가 자동으로 실행됩니다:

**생성되는 데이터:**
- 테이블: 20개 (가게 A, B, C, D 각 5개씩)
- 메뉴: 8개 (각 가게별 2개씩)

**MongoDB Compass에서 확인:**
1. `easython` 데이터베이스 선택
2. `tables` 컬렉션 확인
3. `menus` 컬렉션 확인

---

## 5단계: API 테스트

**브라우저 또는 Postman에서:**

1. **전체 테이블 조회**
   ```
   GET http://localhost:8080/api/tables
   ```

2. **전체 메뉴 조회**
   ```
   GET http://localhost:8080/api/menus
   ```

3. **가게별 메뉴 조회**
   ```
   GET http://localhost:8080/api/menus/restaurant/가게 A
   ```

4. **QR 코드로 테이블 조회**
   ```
   GET http://localhost:8080/api/tables/qr/QR_A_1
   ```

---

## 문제 해결

### MongoDB 연결 실패
```
MongoSocketException: Connection refused
```

**해결:**
1. MongoDB 서버가 실행 중인지 확인
2. 포트 27017이 사용 중인지 확인
3. `application.properties`의 URI 확인

### 포트 8080 이미 사용 중
```
Port 8080 is already in use
```

**해결:**
```properties
# application.properties에서 포트 변경
server.port=8081
```

### 초기 데이터가 생성되지 않음
- MongoDB 연결 확인
- 애플리케이션 로그 확인
- MongoDB Compass에서 데이터 확인

---

## 실행 순서 요약

1. ✅ MongoDB 실행 (Docker 또는 설치)
2. ✅ MongoDB Compass로 연결 확인
3. ✅ Spring Boot 애플리케이션 실행 (IDE 또는 Gradle)
4. ✅ 초기 데이터 자동 생성 확인
5. ✅ API 테스트

